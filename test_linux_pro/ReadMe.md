#### 网络编程例子

**** 
#### 一、目的
- 1.使用网络编程，尝试传输文本文件、二进制文件、图片？

**** 
#### 二、目录说明
- 1.network_client 客户端（发送数据）
- 2.network_service 服务端（接受数据）

**** 
#### 三、现状
##### 1.传输binlog文件
- 1.mysql的binlog文件传输有问题

##### 2.传输文本文件（比如ASCII格式文件）
- 1.文本文件能够传输，但是中文是乱码且md5不匹配
  - 1.~~很奇怪，原始内容为UTF-8，传输完后的文件为ASCII格式；~~
  - 2.~~上述问题，怎么处理？网络传输数据到另外一段，落地到磁盘文件后，文件的编码格式变化了~~
  - 3.文档格式问题的解决：当传输文件的体积较大，每次读取buf max_size-1，写入也是max_size-1即可；但还有其他问题，传输过去的内容有小部分不一致；
- 2.内容不一致问题，可能是黏包造成的；
  - 1.ok了，使用socket传输过去的文本数据md5码一样，内容也不一样（使用beyond compare进行对比）； 
- 3.出错的原因：
  - a、错误一：在写入端，塞入socket的内容长度是缓冲区长度而不是实际从文件中读取的内容长度！而且在缓冲区最后一个位置强制设置'\0'，字符；
  - b、错误二：在数据接收端，错误类似数据写入端；
- 4.尝试修改 发送和接受数据缓冲区大小，用来查看这个值和发送包数量之间的关系；
  - 1.前置条件：a、在同一台机器；b、发送的是文本文件，容量在21M； c、数字参数分别是客户端和服务端处理业务层buf缓冲区填充或者获取次数；
  - 2.buf：200字节，client：109609，server：114171；
  - 3.buf: 1200字节，client：18192，server：18192； 
  - 4.buf: 3000字节，client：7274，server：9294；
  - 5.buf： 5000字节，client：4364，server：8173；
- 5.传输其他格式文本文件也ok。

##### 3.跨网络传输文本文件 ok
- 1.描述：服务端在外网，客户端在内网；
- 2.现象：传输的文件md5码一样，内容也一样；
- 3.注意点：两端程序循环次数不一样，服务端处理包次数高于客户端；这个和同一台机器包含客户端和服务端有差异。
  - 1.~~这个难道是网络传输丢包导致？不对啊~~
  - 2.可能是从客户端发给服务端的包被拆开导致，服务端接收到的包数量变多；

##### 4.传输二进制文件
- 1.传输程序文件，提示如下错误：
  - 1.~~`Bad address`！~~ 
  - 2.通过修改“传输文本文件”程序问题，传输二进制文件的问题也同样解决了。
- 2.目前的问题就是传输的速度很慢！